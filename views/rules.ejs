<!-- A simple static page to explain the full rules in detail -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="css/rules_page.css">
    <title>Rules</title>
  </head>

  <body>
    <h1> Rules of Toroidal Chess </h1>
    <h2> Game Rules </h2>
    <p>This guide assumes you already know the rules of regular chess. Now,
       imagine that a regular chessboard was bent into a cylinder, so that
       the left and right edges were connected, as shown in the figure below:</p>
       <!--  include cylindrical illustration -->
       <img id="cylindrical" src="img/cylindrical-chess.jpeg" alt="Cylindrical Board">
    <p>This can be represented by a square board where the left and right edges
       are connected. So, if a piece moved off the left edge, it would reappear
       on the right edge, and vice-versa. As an example, in the image below, the
       greyed squares represent all legal moves for white's rook.
       The white rook can move from g5 to b5, even though there are pieces on e5
       and c5, since it can move right and wrap around the edge. It cannot
       however, move to d5, since its path going both right and left is blocked.</p>
        <!-- include illustration of the above-->
        <img id="img_1" src="img/illustration_1.png" alt="Rules illustration">
    <p>Now, imagine further bending that cylinder into a torus (doughnut shape),
      so that the front and back edges are now connected, as in the image below:</p>
       <!--  include toroidal illustration -->
       <img id="toroidal" src="img/toroidal.jpeg" alt="Toroidal Board">
      <p>This is toroidal chess. If represented by a square board,
      any piece that moves off the edge of the board
      reappears on the opposite edge. All the other rules of chess are exactly
      the same, with a few caveats. These are:</p>
      <ol>
          <li> The starting position is different. See below for an image of the
               starting position. </li>
          <li> There is no castling. </li>
          <li> Only pawns on the a, b, g, and h files can move 2 spaces on their
               first turn, and consequently, those are the only pawns that
               en passant can apply to. </li>
          <li> A piece cannot move 8 spaces and wrap around to its starting
               position and be considered to have moved - all moves must change
               the board position. </li>
    </ol>
      <!-- include starting position illustration -->
      <img id="img_2" src="img/illustration_2.png" alt="Starting position illustration">
    <h2> Logging In </h2>
    <p> There are a few restrictions on nicknames.</p>
    <ol>
      <li> Nicknames cannot be longer than 15 characters. </li>
      <li> Nicknames cannot consist entirely of whitespace. </li>
      <li> You cannot use the same nickname as someone currently logged in
           online. </li>
    </ol>
    <p>If your nickname violates any of these restrictions, you will be alerted
       and asked to pick a different nickname.</p>
    <h2> The Lobby </h2>
    <p> A list of players who are currently online will appear. To challenge any
        of them to a game, simply click their name. They will receive an invite,
        which they can either decline or accept. If they accept, you two will be
        redirected to the game room, where you can play. Colors will be assigned
        randomly by the server. Currently, you can only play one game at a time,
        though this may change in the future. </p>
    <h3> Challenge Options </h3>
    <p> There are a few options you have when sending challenges. When you send
        a challenge, the opponent is notified of which options you picked, and a
        game with those options begins. The options are explained below: </p>
    <h4> Show valid moves: </h4>
    <p> When it's a player's turn, the computer will show the player valid moves
        when they mouse over one of their own pieces. Note that this applies to
        both players. </p>
    <h4> Show enemy threat: </h4>
    <p> When it's a player's turn, if they mouse over an enemy piece, the
        computer will highlight in red the squares that it threatens. These are
        not necessarily legal moves for the opponent; however, you cannot move
        your king into these squares, as doing so would leave you in check from
        the enemy piece in question. This also applies to both players.</p>
    <h2> Game Play </h2>
    <p> Simply drag and drop your pieces to make a move. If the move is legal,
        it will be made. Otherwise, the piece will snap back to its original
        location. When it's your turn, the bar containing your name will turn
        green. If you are in check, the bar also notifies you of that. At the end
        of the game, the bars display the win/loss status. Also, if the game ended
        in checkmate or stalemate (as opposed to say, a resignation or a draw by
        agreement), upon mousing over the squares, you can see the winning side's threats,
        regardless of whether the show threat option was chosen. This is to help
        players understand why situations are checkmate or stalemate.</p>
    <h3> Game Buttons </h3>
    <h4> Resign </h4>
    <p>This one's pretty self-explanatory, right?</p>
    <h4> Propose Draw </h4>
    <p> To prevent people from spamming draw proposals, once you propose a draw,
         you may not propose another draw until you have made a move. </p>
    <h4> Return To Lobby </h4>
    <p> As its name implies, this button will take you back to the lobby. Be
        aware though, that if you return to the lobby while the game is still
        ongoing, you will lose the game. </p>
    <h4> Arrow Keys </h4>
    <p> You can click on the arrow keys to scroll the board up, down, left, or right.
        This is equivalent to rotating the torus in the XY plane or XZ plane.
        (Or the XY plane and YZ plane - it doesn't matter so long as the 2 planes
        are orthogonal). You can also scroll with the arrow keys on the keyboard,
        or the WASD keys. Try it out and make sure you understand what's happening -
        this is key to understanding the toroidal nature of the board. </p>
    <h2> The Future </h2>
    <p> This web app is a work in progress. In the future, I may implement
        features like game chat, lobby chat, or others, as well as making the
        site look prettier. If you have any ideas for features you would like to
        see implemented, or bug reports, email me at:
        <!-- TODO setup toroidal email -->. Note: I'll include a way to
        email me once I figure out how to do that on a website without getting
        utterly owned by spambots. Before sending a bug report, make
        sure you have a thorough understanding of the rules of the game. All
        the code for this web application can be found on my
        <a href="https://github.com/RyanSharafuddin/Toroidal-Chess/tree/master"
         target="_blank"> Github page
        </a>.</p>
    <h2> Thanks </h2>
    <p> Thanks to my cousin Siam for being the first person I ever played
        toroidal chess with. He beat me the first two times, but on this website,
        I shall defeat him! (Or possibly continue my losing streak; who knows?) </p>
    <p> The website <a href="http://www.cssportal.com" target="_blank">http://www.cssportal.com</a>
        was quite helpful in creating several of the CSS
        templates used for this site. </p>
    <p> The API provided by <a href="http://chessboardjs.com/" target="_blank">
        http://chessboardjs.com/</a>
        was used for the chessboard display (though not for the move validation or rules
        implementing). </p>
  </body>
</html>
